# 프로젝트 지식 맵 및 가이드라인 (Project Knowledge Map)

이 문서는 AI와 개발자가 코드 전체를 읽지 않고도 프로젝트의 설계 의도, 구현 방식, 그리고 FE-BE 간의 연결 구조를 즉시 파악하기 위한 최상위 지침서입니다.

## 1. 문서화 체계 및 목적 (Hierarchy & Purpose)

우리는 AI의 컨텍스트 효율을 극대화하기 위해 정보를 3단계로 계층화하여 관리한다.

1. **README.md (입구):** - 프로젝트의 정체성, 목적, 실행 방법 등 **가장 거시적인 정보**를 담는다.
   - 프로젝트 입문자가 가장 먼저 읽어야 할 가이드 역할을 한다.
2. **ARCHITECTURE.md (시스템 설계도):** - 전역 기술 스택, FE-BE 통신 규약, 인증 방식 등 **기술적 뼈대**를 담는다.
   - 코드를 보지 않고도 데이터가 흐르는 통로를 이해하는 용도이다.
3. **.context.md (기능별 상세 도면):** - 각 기능 폴더(FE features, BE modules) 내부에 위치하며, **비즈니스 로직의 실체**를 담는다.
   - 핵심 파일과 API 엔드포인트를 명세하여 코드 탐색 비용을 최소화한다.

## 2. 문서별 상세 항목 정의

### [README.md] - 프로젝트의 얼굴

- **프로젝트 개요 및 배경:** "왜 이 프로젝트를 시작했는가?" (필요성 및 목적)
- **주요 기능 및 권한:** 핵심 기능 리스트와 사용자 등급별 권한 구조.
- **네비게이션 구조:** 서비스의 전체 페이지 맵.
- **개발 환경 설정:** 기술 스택 요약 및 프로젝트 실행(Setup) 방법.
- **로드맵:** 현재 진행 상황과 향후 계획.

### [ARCHITECTURE.md] - 기술적 약속

- **전역 기술 스택:** 핵심 라이브러리와 버전, 상태 관리 이원화 원칙(Zustand vs TanStack Query).
- **Communication:** FE-BE 통신 방식, API 클라이언트 구조, 전체 엔드포인트 맵, 공통 응답 규격.
- **Authentication:** OAuth 흐름, JWT 토큰 생명주기, 권한 모델(RBAC).
- **Error Handling:** Interceptor → Query → Component 계층별 에러 처리 전략.
- **Project Structure:** 폴더 구조의 의미와 계층 간 참조 규칙, 네이밍 컨벤션.
- **Routing:** 라우트 보호 체계(Auth Guard, Admin Guard), 라우트 매핑 테이블.
- **Type System:** 핵심 도메인 타입 정의, BE 응답과의 매핑 원칙.
- **Environment:** 환경 변수, TypeScript 설정, 빌드 스크립트.

### [.context.md] - 기능의 심장

- **Purpose & Logic:** 해당 기능의 비즈니스 목적 및 복잡한 로직 요약.
- **Connectivity:** 연동되는 FE 컴포넌트 ↔ BE API 엔드포인트 ↔ DB 테이블 관계.
- **Key Files:** 로직의 핵심이 되는 파일과 그 이유.

**작성 기준:** 모든 폴더에 만들지 않는다. 아래 조건 중 하나 이상에 해당할 때만 작성한다.
- 파일이 3개 이상이거나 파일 간 의존 관계가 있는 경우
- 흐름(flow)이 존재하는 경우 (예: OAuth 로그인 순서, 인터셉터 동작)
- 단순 CRUD를 넘는 비즈니스 로직이 있는 경우

**현재 위치:**
| 경로 | 설명 |
|------|------|
| `src/features/auth/.context.md` | 카카오 OAuth 흐름, 토큰 관리, 인증 스토어 |
| `src/api/.context.md` | Axios 인터셉터, 6개 모듈 엔드포인트 매핑 |

## 3. 문서 업데이트 규칙 (Sync Policy)

- **사용자 요청 시:** 사용자가 문서 최신화를 요청할 때.
- **구조적 변경 시:** 기술 스택 변경이나 폴더 구조 개편 시 즉시 반영.
- **작업 완료 시:** 큰 기능 구현 후 AI가 `.context.md` 업데이트 여부를 사용자에게 제안.

## 4. AI 작업 프로토콜 (Operation Protocol)

1. **Context Loading:** `README` → `ARCHITECTURE` 순으로 읽어 프로젝트 성격과 규칙을 파악한다.
2. **Targeting:** 작업 대상 폴더의 `.context.md`를 읽어 관련 파일과 API 정보를 식별한다.
   - `.context.md`가 **없는 폴더**라면: 코드를 직접 읽고 작업한다. 작성 기준에 해당하면 작업 후 생성을 제안한다.
   - `.context.md`가 **있는 폴더**라면: 문서를 먼저 읽고, 핵심 파일만 열어 작업한다.
3. **Execution:** 파악된 지도를 바탕으로 핵심 코드만 열어 작업을 수행한다.
4. **Knowledge Sync:** 작업 완료 후 변경 사항을 문서에 반영하여 지식을 축적한다.
   - `.context.md`를 새로 생성한 경우, 이 문서(PROJECT_GUIDE.md)의 "현재 위치" 테이블에도 추가한다.

---

**"코드는 변하지만, 잘 관리된 문서는 프로젝트의 지능이 된다."**
